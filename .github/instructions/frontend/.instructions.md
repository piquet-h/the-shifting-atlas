# Frontend Module ‚Äì Copilot Instructions

## üìú Purpose

These instructions tell GitHub Copilot how to build and maintain the MMO text adventure‚Äôs client UI in `/frontend`.  
They ensure generated code matches our architecture, integrates cleanly with the backend, and respects our design conventions.

---

## üèõ Architecture Context

- **Hosting:** Azure Static Web Apps (Free Tier)
- **Framework:** React (preferred) or vanilla JS if minimal
- **Backend Access:** All API calls go through Azure API Management (APIM) endpoints
- **Auth:** Microsoft Entra External Identities (supports consumer & guest scenarios; social federation via OIDC)
- **State Management:** React Context API or lightweight state library (e.g., Zustand)
- **Build & Deploy:** GitHub Actions ‚Üí Static Web Apps

---

## üß© Folder Structure

- `src/`
    - `components/` ‚Üí Reusable UI components (e.g., `RoomView`, `CommandInput`, `NPCDialog`)
    - `pages/` ‚Üí Route-level components (e.g., `GamePage`, `LoginPage`)
    - `hooks/` ‚Üí Custom React hooks (e.g., `usePlayerState`, `useAPI`)
    - `context/` ‚Üí Global state providers (e.g., `PlayerContext`)
    - `services/` ‚Üí API client wrappers for backend calls
    - `styles/` ‚Üí CSS modules or styled-components
    - `utils/` ‚Üí Client-side helpers (e.g., text formatting, command parsing)
- `public/` ‚Üí Static assets (icons, manifest, favicon)

---

## üñã Coding Conventions

- Use **functional components** with hooks.
- Use **TypeScript** if possible for type safety.
- All API calls:
    - Go through `services/api.js` (or `.ts`).
    - Use `fetch` or `axios` with base URL from environment variables.
    - Include auth token in headers if required.
- Keep components **small and composable**.
- Use **semantic HTML** for accessibility.
- Use **CSS modules** or styled-components for scoped styling.

---

## üåç MMO-Specific Frontend Rules

- **Game Loop:**
    - Player enters commands via `CommandInput`.
    - Commands are sent to backend HTTP Functions via APIM.
    - Responses update `PlayerContext` and trigger UI updates.
- **Room Rendering:**
    - `RoomView` displays room description, exits, and NPCs.
    - Exits are clickable and trigger movement commands.
- **NPC Interaction:**
    - Dialogue and actions fetched from backend.
    - Support both typed commands and clickable UI.
- **State Persistence:**
    - Player state stored in `PlayerContext` and synced with backend.
    - Local storage may cache last known state for quick reloads.
- **Error Handling:**
    - Show friendly error messages for network/API failures.
    - Retry transient errors automatically.

---

## üß† Copilot Usage Guidelines

- When adding a new feature:
    1. Create a component in `components/` or `pages/`.
    2. Add any API calls to `services/api.js`.
    3. Update `PlayerContext` if it affects global state.
- Inline relevant excerpts from `/docs/modules/*.md` into comments before implementing complex UI logic.
- Keep UI logic separate from API logic ‚Äî components should call hooks or services, not embed fetch calls directly.

---

## üîÑ Maintenance

- Update this file if frontend architecture, conventions, or MMO UI rules change.
- Keep `services/api.js` in sync with backend API changes.
- Ensure all new components are documented in `/docs/developer-workflow/ui-components.md`.

---
