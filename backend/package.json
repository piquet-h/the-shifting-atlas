{
    "name": "the-shifting-atlas-backend",
    "version": "0.1.0",
    "private": true,
    "type": "module",
    "main": "dist/src/{index.js,functions/*.js,mcp/**/*.js}",
    "scripts": {
        "clean": "rm -rf dist .cache coverage",
        "build": "tsc",
        "watch": "tsc --watch --preserveWatchOutput",
        "typecheck": "tsc --noEmit",
        "lint": "eslint src test --ext .ts",
        "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
        "format:check": "prettier --check \"src/**/*.ts\" \"test/**/*.ts\"",
        "test": "npm run test:unit && npm run test:integration",
        "test:unit": "NODE_ENV=test node --test --import=tsx test/unit/*.test.ts",
        "test:integration": "NODE_ENV=test node --test --import=tsx test/integration/*.test.ts",
        "test:e2e": "NODE_ENV=test PERSISTENCE_MODE=cosmos node --test --test-timeout=300000 --import=tsx test/e2e/*.e2e.test.ts",
        "test:cov": "NODE_ENV=test c8 --reporter=text --reporter=lcov node --test --import=tsx --import=./test/setup.ts test/**/*.test.ts || true",
        "seed:production": "npm run use:cosmos && PERSISTENCE_MODE=cosmos tsx scripts/seed-production.ts",
        "reconcile:world": "PERSISTENCE_MODE=memory tsx scripts/reconcile-world.ts --dry-run",
        "scan:graph-consistency": "node ../scripts/scan-exits-consistency.mjs",
        "query:deadletters": "tsx scripts/query-deadletters.ts",
        "validate:partitions": "tsx ../scripts/validate-partition-distribution.ts",
        "use:memory": "cp local.settings.memory.json local.settings.json && echo '✓ Switched to MEMORY mode'",
        "use:cosmos": "cp local.settings.cosmos.json local.settings.json && echo '✓ Switched to COSMOS mode'",
        "predev": "npm run build",
        "dev": "concurrently -k -n tsc,host -c yellow,blue \"npm:watch\" \"func start\"",
        "dev:fullstack": "npm run build && concurrently -k -n backend,frontend -c blue,magenta \"func start\" \"cd ../frontend && npm run swa\"",
        "start": "npm run build && func start",
        "verify:instructions": "node ../scripts/verify-instructions.mjs"
    },
    "engines": {
        "node": "22.x",
        "npm": ">=10.0.0"
    },
    "dependencies": {
        "@azure/cosmos": "^4.3.0",
        "@azure/functions": "^4.11.0",
        "@azure/identity": "^4.13.0",
        "@azure/keyvault-secrets": "^4.10.0",
        "@piquet-h/shared": "^0.3.128",
        "@types/marked": "^5.0.2",
        "applicationinsights": "^2.9.5",
        "ci": "^2.3.0",
        "gremlin": "^3.7.0",
        "inversify": "^7.10.3",
        "marked": "^17.0.1",
        "openai": "^6.16.0",
        "reflect-metadata": "^0.2.2",
        "ws": "^8.18.0",
        "zod": "^4.1.11"
    },
    "devDependencies": {
        "@types/gremlin": "^3.6.5",
        "@types/node": "^22.19.8",
        "@types/sinon": "^20.0.0",
        "@types/uuid": "^10.0.0",
        "@types/ws": "^8.18.1",
        "@typescript-eslint/eslint-plugin": "^8.44.0",
        "@typescript-eslint/parser": "^8.44.0",
        "c8": "^10.1.2",
        "concurrently": "^9.2.1",
        "eslint": "^9.35.0",
        "eslint-plugin-prettier": "^5.2.1",
        "prettier": "^3.3.3",
        "sinon": "^21.0.0",
        "tsx": "^4.21.0",
        "typescript": "^5.9.2",
        "why-is-node-running": "^3.2.2"
    }
}